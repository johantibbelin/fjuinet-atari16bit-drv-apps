'
' Disk code written for Fujinet Atari 16bit
'
' Disk image explorer, drivers and more
'
' ------------------------------------
' Inline data
' ------------------------------------
' ASM routines
INLINE asm%,2048
' ------------------------------------
RESERVE 100000
CLS
diskimg_load
diskimg_unload
RESERVE
END
PROCEDURE low
  LOCAL scr%
  scr%=XBIOS(2)
  ~XBIOS(5,L:scr%,L:scr%,0)
  SETCOLOR 3,&H520
  SETCOLOR 15,&H0
  CLS
RETURN
PROCEDURE medium
  LOCAL scr%
  scr%=XBIOS(2)
  ~XBIOS(5,L:scr%,L:scr%,1)
  SETCOLOR 3,&H0
  CLS
RETURN
PROCEDURE diskimg_load
  FILESELECT "I:\*.st","",file$
  PRINT file$
  dimg%=MALLOC(82*10*512*2)
  IF dimg%<0
    PRINT "not enough ram!"
    GOTO ret
  ENDIF
  PRINT "$";HEX$(dimg%)
  BLOAD file$,dimg%
  '  ~MFREE(dimg%)
ret:
RETURN
PROCEDURE diskimg_unload
  ~MFREE(dimg%)
RETURN
